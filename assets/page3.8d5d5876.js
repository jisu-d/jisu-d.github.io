import{r as D,j as s,F as S,a as e,c as E,R as I}from"./jsx-runtime.4063c5da.js";import{p as T,l as B}from"./proxy.ced3beb3.js";let t=new Date;const R=()=>{const n=t.getFullYear(),c=t.getMonth();return`${n}\uB144 ${c+1}\uC6D4`},b=n=>{const c=`${n.getFullYear()}`.padStart(2,"0"),h=`${n.getMonth()+1}`.padStart(2,"0"),u=`${n.getDate()}`.padStart(2,"0");return`${c}${h}${u}`};function O(){let[n,c]=D.exports.useState(),[h,u]=D.exports.useState();const l=async()=>{const d=t.getFullYear(),o=t.getMonth(),p=new Date(d,o,0),g=new Date(d,o+1,0),f={start:b(new Date(d,o,1)),last:b(new Date(d,o+1,0))},r=await(await fetch(`${T}/fetchSchoolScheduleAll?school=${B.schoolname}&startDay=${f.start}&lastDay=${f.last}`)).json(),k=p.getDate(),$=p.getDay(),w=g.getDate(),L=g.getDay(),x=[],F=[...Array(w+1).keys()].slice(1),C=[];if($!==6)for(let a=0;a<$+1;a++)x.unshift(k-a);for(let a=1;a<7-L;a++)C.push(a);const m=x.concat(F,C),v=[],Y=m.indexOf(1),j=m.lastIndexOf(w);m.forEach((a,i)=>{const M=i>=Y&&i<j+1?"this":"other";r.length>0&&a===Number(r[0].day.slice(6))?(v.push(s("div",{className:"date",children:[e("span",{className:M,children:a}),e("div",{className:"eventname",children:r[0].eventName})]},`data-date-num-${i}`)),r.shift()):v.push(e("div",{className:"date",children:e("span",{className:M,children:a})},`data-date-num-${i}`))}),c(e(S,{children:v}))},y=()=>{t.setDate(1),t.setMonth(t.getMonth()-1),l()},N=()=>{t.setDate(1),t.setMonth(t.getMonth()+1),l()},A=()=>{t=new Date,l()};return D.exports.useEffect(()=>{l()},[]),s(S,{children:[s("div",{className:"calendar",children:[s("div",{className:"header",children:[e("div",{className:"year-month",children:R()}),s("div",{className:"nav",children:[e("button",{className:"nav-btn go-prev",onClick:y,children:"<"}),e("button",{className:"nav-btn go-today",onClick:A,children:"Today"}),e("button",{className:"nav-btn go-next",onClick:N,children:">"})]})]}),s("div",{className:"main",children:[s("div",{className:"days",children:[e("div",{className:"day",children:"\uC77C"}),e("div",{className:"day",children:"\uC6D4"}),e("div",{className:"day",children:"\uD654"}),e("div",{className:"day",children:"\uC218"}),e("div",{className:"day",children:"\uBAA9"}),e("div",{className:"day",children:"\uAE08"}),e("div",{className:"day",children:"\uD1A0"})]}),e("div",{className:"dates",children:n})]})]}),e("div",{children:s("div",{className:"m-nav",children:[e("div",{className:"m-btn",onClick:y,children:"<"}),e("div",{className:"click-day",children:h}),e("div",{className:"m-btn",onClick:N,children:">"})]})})]})}const P=document.getElementById("app");E.createRoot(P).render(e(I.StrictMode,{children:e(O,{})}));
