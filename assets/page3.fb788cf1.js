import{r as w,j as s,a as e,F,c as T,R as Y}from"./jsx-runtime.4063c5da.js";import{p as j,l as E}from"./proxy.ced3beb3.js";let t=new Date;const I=()=>{const n=t.getFullYear(),l=t.getMonth();return`${n}\uB144 ${l+1}\uC6D4`},x=n=>{const l=`${n.getFullYear()}`.padStart(2,"0"),c=`${n.getMonth()+1}`.padStart(2,"0"),o=`${n.getDate()}`.padStart(2,"0");return`${l}${c}${o}`};function B(){let[n,l]=w.exports.useState();const c=async()=>{const d=t.getFullYear(),r=t.getMonth(),y=new Date(d,r,0),N=new Date(d,r+1,0),g={start:x(new Date(d,r,1)),last:x(new Date(d,r+1,0))},i=await(await fetch(`${j}/fetchSchoolScheduleAll?school=${E.schoolname}&startDay=${g.start}&lastDay=${g.last}`)).json(),M=y.getDate(),p=y.getDay(),f=N.getDate(),S=N.getDay(),C=[],A=[...Array(f+1).keys()].slice(1),$=[];if(p!==6)for(let a=0;a<p+1;a++)C.unshift(M-a);for(let a=1;a<7-S;a++)$.push(a);const m=C.concat(A,$),v=[],k=m.indexOf(1),L=m.lastIndexOf(f);m.forEach((a,h)=>{const b=h>=k&&h<L+1?"this":"other";i.length>0&&a===Number(i[0].day.slice(6))?(v.push(s("div",{className:"date",children:[e("span",{className:b,children:a}),e("div",{className:"eventname",children:i[0].eventName})]},`data-date-num-${h}`)),i.shift()):v.push(e("div",{className:"date",children:e("span",{className:b,children:a})},`data-date-num-${h}`))}),l(e(F,{children:v}))},o=()=>{t.setDate(1),t.setMonth(t.getMonth()-1),c()},u=()=>{t.setDate(1),t.setMonth(t.getMonth()+1),c()},D=()=>{t=new Date,c()};return w.exports.useEffect(()=>{c()},[]),s("div",{className:"calendar",children:[s("div",{className:"header",children:[e("div",{className:"year-month",children:I()}),s("div",{className:"nav",children:[e("button",{className:"nav-btn go-prev",onClick:o,children:"<"}),e("button",{className:"nav-btn go-today",onClick:D,children:"Today"}),e("button",{className:"nav-btn go-next",onClick:u,children:">"})]})]}),s("div",{className:"main",children:[s("div",{className:"days",children:[e("div",{className:"day",children:"\uC77C"}),e("div",{className:"day",children:"\uC6D4"}),e("div",{className:"day",children:"\uD654"}),e("div",{className:"day",children:"\uC218"}),e("div",{className:"day",children:"\uBAA9"}),e("div",{className:"day",children:"\uAE08"}),e("div",{className:"day",children:"\uD1A0"})]}),e("div",{className:"dates",children:n})]}),s("div",{className:"m-nav",children:[e("button",{className:"nav-btn go-prev",onClick:o,children:"<"}),e("button",{className:"nav-btn go-today",onClick:D,children:"Today"}),e("button",{className:"nav-btn go-next",onClick:u,children:">"})]})]})}const R=document.getElementById("app");T.createRoot(R).render(e(Y.StrictMode,{children:e(B,{})}));
