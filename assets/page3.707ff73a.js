import{r as D,j as s,F as S,a as e,c as j,R as E}from"./jsx-runtime.c5b483c1.js";import{p as I}from"./proxy.6e5bd081.js";import{l as B}from"./local_data.aadc5391.js";let t=new Date;const R=()=>{const c=t.getFullYear(),d=t.getMonth();return`${c}\uB144 ${d+1}\uC6D4`},b=c=>{const d=`${c.getFullYear()}`.padStart(2,"0"),m=`${c.getMonth()+1}`.padStart(2,"0"),l=`${c.getDate()}`.padStart(2,"0");return`${d}${m}${l}`};function q(){let[c,d]=D.exports.useState(),[m,l]=D.exports.useState();const o=async()=>{const r=t.getFullYear(),n=t.getMonth(),p=new Date(r,n,0),g=new Date(r,n+1,0),f={start:b(new Date(r,n,1)),last:b(new Date(r,n+1,0))},i=await(await fetch(`${I}/fetchSchoolScheduleAll?school=${B.schoolname}&startDay=${f.start}&lastDay=${f.last}`)).json(),A=p.getDate(),C=p.getDay(),M=g.getDate(),L=g.getDay(),$=[],T=[...Array(M+1).keys()].slice(1),w=[];if(C!==6)for(let a=0;a<C+1;a++)$.unshift(A-a);for(let a=1;a<7-L;a++)w.push(a);const v=$.concat(T,w),u=[],F=v.indexOf(1),Y=v.lastIndexOf(M);v.forEach((a,h)=>{const x=h>=F&&h<Y+1?"this":"other";i.length>0&&a===Number(i[0].day.slice(6))?(u.push(s("div",{className:"date",children:[e("span",{className:x,children:a}),e("div",{className:"eventname",children:i[0].eventName})]},`data-date-num-${h}`)),i.shift()):u.push(e("div",{className:"date",children:e("span",{className:x,children:a})},`data-date-num-${h}`))}),d(e(S,{children:u}))},y=()=>{l(""),t.setDate(1),t.setMonth(t.getMonth()-1),o()},N=()=>{l(""),t.setDate(1),t.setMonth(t.getMonth()+1),o()},k=()=>{t=new Date,o()};return D.exports.useEffect(()=>{o()},[]),s(S,{children:[s("div",{className:"calendar",children:[s("div",{className:"header",children:[e("div",{className:"year-month",children:R()}),s("div",{className:"nav",children:[e("button",{className:"nav-btn go-prev",onClick:y,children:"<"}),e("button",{className:"nav-btn go-today",onClick:k,children:"Today"}),e("button",{className:"nav-btn go-next",onClick:N,children:">"})]})]}),s("div",{className:"main",children:[s("div",{className:"days",children:[e("div",{className:"day",children:"\uC77C"}),e("div",{className:"day",children:"\uC6D4"}),e("div",{className:"day",children:"\uD654"}),e("div",{className:"day",children:"\uC218"}),e("div",{className:"day",children:"\uBAA9"}),e("div",{className:"day",children:"\uAE08"}),e("div",{className:"day",children:"\uD1A0"})]}),e("div",{className:"dates",onClick:r=>{const n=r.target;n.className==="eventname"?l(n.innerHTML):n.className==="date"&&n.querySelector(".eventname")&&l(n.querySelector(".eventname").innerHTML)},children:c})]})]}),e("div",{children:s("div",{className:"m-nav",children:[e("div",{className:"m-btn",onClick:y,children:"<"}),e("div",{className:"click-day",children:m}),e("div",{className:"m-btn",onClick:N,children:">"})]})})]})}const H=document.getElementById("app");j.createRoot(H).render(e(E.StrictMode,{children:e(q,{})}));
