import{r as w,j as n,F as x,a as e,c as T,R as Y}from"./jsx-runtime.4063c5da.js";import{p as j,l as E}from"./proxy.ced3beb3.js";let t=new Date;const I=()=>{const s=t.getFullYear(),l=t.getMonth();return`${s}\uB144 ${l+1}\uC6D4`},M=s=>{const l=`${s.getFullYear()}`.padStart(2,"0"),c=`${s.getMonth()+1}`.padStart(2,"0"),o=`${s.getDate()}`.padStart(2,"0");return`${l}${c}${o}`};function B(){let[s,l]=w.exports.useState();const c=async()=>{const d=t.getFullYear(),r=t.getMonth(),y=new Date(d,r,0),N=new Date(d,r+1,0),g={start:M(new Date(d,r,1)),last:M(new Date(d,r+1,0))},i=await(await fetch(`${j}/fetchSchoolScheduleAll?school=${E.schoolname}&startDay=${g.start}&lastDay=${g.last}`)).json(),S=y.getDate(),p=y.getDay(),f=N.getDate(),A=N.getDay(),C=[],k=[...Array(f+1).keys()].slice(1),$=[];if(p!==6)for(let a=0;a<p+1;a++)C.unshift(S-a);for(let a=1;a<7-A;a++)$.push(a);const m=C.concat(k,$),v=[],L=m.indexOf(1),F=m.lastIndexOf(f);m.forEach((a,h)=>{const b=h>=L&&h<F+1?"this":"other";i.length>0&&a===Number(i[0].day.slice(6))?(v.push(n("div",{className:"date",children:[e("span",{className:b,children:a}),e("div",{className:"eventname",children:i[0].eventName})]},`data-date-num-${h}`)),i.shift()):v.push(e("div",{className:"date",children:e("span",{className:b,children:a})},`data-date-num-${h}`))}),l(e(x,{children:v}))},o=()=>{t.setDate(1),t.setMonth(t.getMonth()-1),c()},u=()=>{t.setDate(1),t.setMonth(t.getMonth()+1),c()},D=()=>{t=new Date,c()};return w.exports.useEffect(()=>{c()},[]),n(x,{children:[n("div",{className:"calendar",children:[n("div",{className:"header",children:[e("div",{className:"year-month",children:I()}),n("div",{className:"nav",children:[e("button",{className:"nav-btn go-prev",onClick:o,children:"<"}),e("button",{className:"nav-btn go-today",onClick:D,children:"Today"}),e("button",{className:"nav-btn go-next",onClick:u,children:">"})]})]}),n("div",{className:"main",children:[n("div",{className:"days",children:[e("div",{className:"day",children:"\uC77C"}),e("div",{className:"day",children:"\uC6D4"}),e("div",{className:"day",children:"\uD654"}),e("div",{className:"day",children:"\uC218"}),e("div",{className:"day",children:"\uBAA9"}),e("div",{className:"day",children:"\uAE08"}),e("div",{className:"day",children:"\uD1A0"})]}),e("div",{className:"dates",children:s})]})]}),e("div",{children:n("div",{className:"m-nav",children:[e("button",{className:"nav-btn go-prev",onClick:o,children:"<"}),e("button",{className:"nav-btn go-today",onClick:D,children:"Today"}),e("button",{className:"nav-btn go-next",onClick:u,children:">"})]})})]})}const R=document.getElementById("app");T.createRoot(R).render(e(Y.StrictMode,{children:e(B,{})}));
